(function(e){function t(t){for(var r,s,i=t[0],c=t[1],l=t[2],u=0,d=[];u<i.length;u++)s=i[u],Object.prototype.hasOwnProperty.call(o,s)&&o[s]&&d.push(o[s][0]),o[s]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);f&&f(t);while(d.length)d.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,s=1;s<n.length;s++){var i=n[s];0!==o[i]&&(r=!1)}r&&(a.splice(t--,1),e=c(c.s=n[0]))}return e}var r={},s={app:0},o={app:0},a=[];function i(e){return c.p+"js/"+({collections:"collections",photos:"photos",users:"users"}[e]||e)+"."+{collections:"f5282fc6",photos:"4fb0b1bb",users:"ad9c01a2"}[e]+".js"}function c(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.e=function(e){var t=[],n={collections:1,photos:1,users:1};s[e]?t.push(s[e]):0!==s[e]&&n[e]&&t.push(s[e]=new Promise((function(t,n){for(var r="css/"+({collections:"collections",photos:"photos",users:"users"}[e]||e)+"."+{collections:"899ab38b",photos:"0d3f4cbb",users:"63408979"}[e]+".css",o=c.p+r,a=document.getElementsByTagName("link"),i=0;i<a.length;i++){var l=a[i],u=l.getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(u===r||u===o))return t()}var d=document.getElementsByTagName("style");for(i=0;i<d.length;i++){l=d[i],u=l.getAttribute("data-href");if(u===r||u===o)return t()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=t,f.onerror=function(t){var r=t&&t.target&&t.target.src||o,a=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");a.code="CSS_CHUNK_LOAD_FAILED",a.request=r,delete s[e],f.parentNode.removeChild(f),n(a)},f.href=o;var h=document.getElementsByTagName("head")[0];h.appendChild(f)})).then((function(){s[e]=0})));var r=o[e];if(0!==r)if(r)t.push(r[2]);else{var a=new Promise((function(t,n){r=o[e]=[t,n]}));t.push(r[2]=a);var l,u=document.createElement("script");u.charset="utf-8",u.timeout=120,c.nc&&u.setAttribute("nonce",c.nc),u.src=i(e);var d=new Error;l=function(t){u.onerror=u.onload=null,clearTimeout(f);var n=o[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),s=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+r+": "+s+")",d.name="ChunkLoadError",d.type=r,d.request=s,n[1](d)}o[e]=void 0}};var f=setTimeout((function(){l({type:"timeout",target:u})}),12e4);u.onerror=u.onload=l,document.head.appendChild(u)}return Promise.all(t)},c.m=e,c.c=r,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)c.d(n,r,function(t){return e[t]}.bind(null,r));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/",c.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],u=l.push.bind(l);l.push=t,l=l.slice();for(var d=0;d<l.length;d++)t(l[d]);var f=u;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},2616:function(e,t,n){"use strict";var r=n("7cf2"),s=n.n(r);s.a},"2d5f":function(e,t,n){},4480:function(e,t,n){},5026:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"gallery"},[n("div",{staticClass:"gallery__content"},e._l(e.images,(function(t,r){return n("div",{key:r,staticClass:"gallery-item"},[n("el-image",{staticClass:"gallery-img",attrs:{fit:"cover",src:t.urls.small,alt:t.alt_description},on:{click:function(t){e.isModalOpen=!0},mousemove:function(n){return e.imageCheck(t)}}}),e.isViewImage==t.id?n("div",{staticClass:"gallery__info"},[n("div",{staticClass:"gallery__info-title"},[n("h4",[e._v(e._s(t.user.name))]),n("p",[e._v("@"+e._s(t.user.username))])]),t.description?n("div",{staticClass:"gallery__info-image"},[n("h3",{staticClass:"gallery__info-image__title"},[e._v(e._s(e.currentDescription))]),n("p",[e._v(e._s(t.created_at))])]):e._e()]):e._e()],1)})),0),e.isModalOpen?n("Modal",{attrs:{image:e.currentImage,isModalOpen:e.isModalOpen},on:{modalfalse:function(t){e.isModalOpen=!1}}}):e._e()],1)},s=[],o=(n("a4d3"),n("e01a"),n("a15b"),n("a434"),n("ac1f"),n("1276"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"modal__wrapper",on:{click:function(t){return e.$emit("modalfalse",!1)}}},[n("el-card",{staticClass:"modal",nativeOn:{click:function(e){e.stopPropagation()}}},[n("div",{staticClass:"modal__content"},[n("div",[n("el-image",{staticClass:"modal__image",attrs:{alt:e.image.alt_description,src:e.image.urls.small,fit:"cover"}}),n("p",{staticClass:"modal__date"},[e._v(e._s(e.image.created_at))])],1),n("div",{staticClass:"modal__right"},[n("h2",{staticClass:"modal__value"},[e._v(e._s(e.image.user.name))]),n("p",{staticClass:"modal__value"},[e._v("@"+e._s(e.image.user.username))]),e.image.description?n("p",{staticClass:"modal__value"},[e._v(e._s(e.image.description))]):n("p",{staticClass:"modal__value"},[e._v("Описание отсутствует")]),n("el-button",{staticClass:"modal__btn",attrs:{type:"success"},on:{click:function(t){return e.imageSave(e.image)}}},[e._v("Скачать изображение")])],1),n("div",{on:{click:function(t){return e.$emit("modalfalse",!1)}}},[n("i",{staticClass:"modal__icon el-icon-close"})])])])],1)}),a=[],i={props:{isModalOpen:{type:Boolean,default:!1},image:Object},methods:{imageSave:function(e){window.open(e.links.download)}}},c=i,l=(n("2616"),n("2877")),u=Object(l["a"])(c,o,a,!1,null,"6df49c43",null),d=u.exports,f=(n("4480"),{components:{Modal:d},data:function(){return{isViewImage:!1,isModalOpen:!1,currentImage:"",currentDescription:""}},props:{images:Array},methods:{imageCheck:function(e){this.isViewImage=e.id,this.currentImage=e,this.currentDescription=e.description,null!=e.description&&e.description.length>100&&(this.currentDescription=e.description.split("").splice(0,100).join("")+"...")}}}),h=f,p=Object(l["a"])(h,r,s,!1,null,"79f770fa",null);t["a"]=p.exports},5259:function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),s=n("9483");Object(s["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});n("b0c0"),n("d3b7");var o=n("8c4f"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("Images",{attrs:{images:e.images}}),e.$store.getters.isError.length>0?n("div",[n("Error")],1):e._e()],1)},i=[],c=n("a916"),l=n("cb2c"),u=n("5026"),d={name:"Home",components:{Images:u["a"]},data:function(){return{img:"",images:[]}},created:function(){var e=this;l["a"].photos.getRandomPhoto({count:27}).then(c["toJson"]).then((function(t){return e.images=t})).catch((function(t){return e.$store.commit("setError",t)}))},methods:{}},f=d,h=n("2877"),p=Object(h["a"])(f,a,i,!1,null,null,null),m=p.exports,g=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e.$store.getters.isError.length>0?r("div",[r("Error")],1):r("div",{staticClass:"auth"},[r("h1",{on:{click:e.login}},[e._v("Авторизоваться с помощью Unsplash")]),r("img",{staticClass:"auth__logo",attrs:{src:n("9b19"),alt:""},on:{click:e.login}}),e.isAuth?r("div",{staticClass:"auth-form"},[r("el-input",{attrs:{placeholder:"Вставьте код авторизации"},model:{value:e.codeAuth,callback:function(t){e.codeAuth=t},expression:"codeAuth"}}),r("el-button",{staticClass:"auth-form-btn",attrs:{type:"success"},on:{click:e.loginEnd}},[e._v("Готово")])],1):e._e()])])},v=[],_={name:"Auth",data:function(){return{unsplash:"",codeAuth:"",isAuth:!1}},methods:{login:function(){var e=l["a"].auth.getAuthenticationUrl(["public","read_user","read_photos","read_collections"]);this.isAuth=!0,window.open(e,"_blank")},loginEnd:function(){var e=this;l["a"].auth.userAuthentication(this.codeAuth).then(c["toJson"]).then((function(t){t.error?e.$message.error("Вы ввели неккоректный ключ"):(l["a"].auth.setBearerToken(t.access_token),localStorage.setItem("Bearer",JSON.stringify(t)),l["a"].currentUser.profile().then(c["toJson"]).then((function(t){localStorage.setItem("User",JSON.stringify(t)),e.$router.push("/users/"+t.username)})).catch((function(e){return console.log(e)})))})).catch((function(e){return console.log(e)}))}}},b=_,y=(n("878d"),Object(h["a"])(b,g,v,!1,null,"a63c324c",null)),C=y.exports;r["default"].use(o["a"]);var k=[{path:"/",name:"Home",component:m},{path:"/auth",name:"Auth",component:C},{path:"/users/:id",name:"User",component:function(){return n.e("users").then(n.bind(null,"1511"))}},{path:"/album",name:"Collections",component:function(){return n.e("collections").then(n.bind(null,"4355"))}},{path:"/collection/:id",component:function(){return n.e("photos").then(n.bind(null,"fcb2"))}}],O=new o["a"]({mode:"history",base:"/",routes:k});O.beforeEach((function(e,t,n){"Auth"==e.name&&localStorage.getItem("Bearer")?n({name:"Home"}):n()}));var S=O,w=n("2f62");r["default"].use(w["a"]);var E=new w["a"].Store({state:{isError:[]},mutations:{setError:function(e,t){console.log(t),e.isError.push(t)}},actions:{},getters:{isError:function(e){return e.isError}},modules:{}}),x=n("5c96"),A=n.n(x),j=(n("0fae"),n("dccd")),I=n.n(j),U=n("4897"),$=n.n(U),P=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("Header"),n("router-view")],1)},M=[],N=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-header",{staticClass:"header"},[n("div",{staticClass:"header__content"},[n("div",{staticClass:"header__left"},[n("el-link",{staticClass:"header-title",attrs:{href:"/"}},[n("h1",[e._v("MyOceanPhotos")])]),n("el-input",{staticClass:"header-input",attrs:{placeholder:"Введите название изображения..."},model:{value:e.textSearch,callback:function(t){e.textSearch=t},expression:"textSearch"}}),n("i",{staticClass:"header-icon el-icon-position",on:{click:e.findImage}})],1),n("div",{staticClass:"header__right"},[e.isUser?e._e():n("router-link",{staticClass:"header-link",attrs:{type:"info",to:"/auth"}},[e._v("Авторизация")]),e.isUser?n("el-link",{attrs:{type:"info",href:"/users/"+e.user.username}},[n("i",{staticClass:"header-icon-profile el-icon-user-solid"})]):e._e(),e.isUser?n("h3",{on:{click:e.logout}},[e._v("Выйти из аккаунта")]):e._e()],1),n("i",{staticClass:"el-icon-menu header__menu-icon",on:{click:e.menuOpen}}),n("div",{ref:"menu",staticClass:"menu"},[n("ul",{staticClass:"menu__list"},[n("li",{staticClass:"menu-item menu-input"},[n("el-input",{attrs:{placeholder:"Введите название изображения..."},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.textSearch(t)},change:e.findImage},model:{value:e.textSearch,callback:function(t){e.textSearch=t},expression:"textSearch"}}),n("el-button",{staticClass:"menu-button",attrs:{type:"success"},on:{click:e.findImage}},[e._v("Найти")])],1),n("li",{staticClass:"menu-item"},[e.isUser?e._e():n("router-link",{staticClass:"header-link",attrs:{type:"info",to:"/auth"}},[e._v("Авторизация")]),n("div",{staticClass:"menu-item-profile"},[e.isUser?n("el-link",{attrs:{type:"info",href:"/users/"+e.user.username}},[n("i",{staticClass:"el-icon-user-solid menu-profile-icon"})]):e._e(),e.isUser?n("h3",{on:{click:e.logout}},[e._v("Выйти из аккаунта")]):e._e()],1)],1)])])])])],1)},B=[],J=(n("2d5f"),{data:function(){return{isUser:!1,user:"",isOpen:!1,textSearch:""}},created:function(){this.checkUser()},updated:function(){this.checkUser()},methods:{menuOpen:function(){this.isOpen=!this.isOpen,this.isOpen&&this.$refs.menu.classList.add("menu-active"),!this.isOpen&&this.$refs.menu.classList.contains("menu-active")&&this.$refs.menu.classList.remove("menu-active")},logout:function(){var e=this;localStorage.removeItem("Bearer"),localStorage.removeItem("User"),this.$message.error("Вы успешно вышли из аккаунта"),setTimeout((function(){return e.$router.push("/")}),2e3)},findImage:function(){console.log(this.textSearch),this.textSearch.length>2&&this.$router.push("/album?img="+this.textSearch)},checkUser:function(){localStorage.getItem("User")?(this.isUser=!0,this.user=JSON.parse(localStorage.getItem("User"))):this.isUser=!1}}}),T=J,L=Object(h["a"])(T,N,B,!1,null,"d40e92dc",null),D=L.exports,H={components:{Header:D}},V=H,F=(n("5c0b"),Object(h["a"])(V,P,M,!1,null,null,null)),K=F.exports,q=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"error"},[r("div",{staticClass:"error__title"},[r("h1",[e._v("УПС..Что то пошло не так :000")]),r("p",[e._v("Скорее всего произошла ошибка на стороне сервера")]),r("p",{staticClass:"error-list",on:{click:function(t){e.isOpen=!e.isOpen}}},[e._v("Подробнее...")]),e.isOpen?r("div",e._l(this.$store.getters.isError,(function(t,n){return r("div",{key:n},[r("p",[e._v(e._s(t))])])})),0):e._e()]),r("img",{attrs:{src:n("f6de"),alt:"image"}})])},R=[],Y={name:"Error",data:function(){return{isOpen:!1}}},z=Y,G=(n("8f9a"),Object(h["a"])(z,q,R,!1,null,"6559a0e1",null)),Q=G.exports;r["default"].config.productionTip=!1,$.a.use(I.a),r["default"].use(A.a),r["default"].component("Error",Q),new r["default"]({router:S,store:E,render:function(e){return e(K)}}).$mount("#app")},"5c0b":function(e,t,n){"use strict";var r=n("9c0c"),s=n.n(r);s.a},"7cf2":function(e,t,n){},"878d":function(e,t,n){"use strict";var r=n("e8d4"),s=n.n(r);s.a},"8f9a":function(e,t,n){"use strict";var r=n("5259"),s=n.n(r);s.a},"9b19":function(e,t,n){e.exports=n.p+"img/logo.ba07b64d.svg"},"9c0c":function(e,t,n){},cb2c:function(e,t,n){"use strict";var r=n("a916"),s=n.n(r),o=JSON.parse(localStorage.getItem("Bearer")),a=null;localStorage.getItem("Bearer")&&(a=o.access_token);var i=new s.a({accessKey:"e0cr-8Zav0eebVKFDeQyJt-BctM8Yy7HniP_bl6LbPM",secret:"AYGyjJpuX4CPySsR5OV70qW3MIwOUSuPFKPJz-2NK3o",callbackUrl:"urn:ietf:wg:oauth:2.0:oob",headers:{"Accept-Version":"v1"},bearerToken:a,timeout:500});t["a"]=i},e8d4:function(e,t,n){},f6de:function(e,t,n){e.exports=n.p+"img/error.1212787b.jpg"}});
//# sourceMappingURL=app.4916a455.js.map