(function(e){function t(t){for(var s,o,a=t[0],c=t[1],l=t[2],d=0,f=[];d<a.length;d++)o=a[d],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&f.push(n[o][0]),n[o]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(e[s]=c[s]);u&&u(t);while(f.length)f.shift()();return i.push.apply(i,l||[]),r()}function r(){for(var e,t=0;t<i.length;t++){for(var r=i[t],s=!0,a=1;a<r.length;a++){var c=r[a];0!==n[c]&&(s=!1)}s&&(i.splice(t--,1),e=o(o.s=r[0]))}return e}var s={},n={app:0},i=[];function o(t){if(s[t])return s[t].exports;var r=s[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=s,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)o.d(r,s,function(t){return e[t]}.bind(null,s));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],c=a.push.bind(a);a.push=t,a=a.slice();for(var l=0;l<a.length;l++)t(a[l]);var u=c;i.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"0475":function(e,t,r){},"2d5f":function(e,t,r){},4480:function(e,t,r){},5259:function(e,t,r){},"536b":function(e,t,r){},5488:function(e,t,r){"use strict";var s=r("f8d9"),n=r.n(s);n.a},5661:function(e,t,r){},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var s=r("2b0e"),n=r("9483");Object(n["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});r("b0c0");var i=r("8c4f"),o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("Images",{attrs:{images:e.images}}),e.$store.getters.isError.length>0?r("div",[r("Error")],1):e._e()],1)},a=[],c=r("a916"),l=r.n(c),u=JSON.parse(localStorage.getItem("Bearer")),d=null;localStorage.getItem("Bearer")&&(d=u.access_token);var f=new l.a({accessKey:"e0cr-8Zav0eebVKFDeQyJt-BctM8Yy7HniP_bl6LbPM",secret:"AYGyjJpuX4CPySsR5OV70qW3MIwOUSuPFKPJz-2NK3o",callbackUrl:"urn:ietf:wg:oauth:2.0:oob",headers:{"Accept-Version":"v1"},bearerToken:d,timeout:500}),m=f,h=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"gallery"},[r("div",{staticClass:"gallery__content"},e._l(e.images,(function(t,s){return r("div",{key:s,staticClass:"gallery-item"},[r("el-image",{staticClass:"gallery-img",attrs:{fit:"cover",src:t.urls.small,alt:t.alt_description},on:{click:function(t){e.isModalOpen=!0},mousemove:function(r){return e.imageCheck(t)}}}),e.isViewImage==t.id?r("div",{staticClass:"gallery__info"},[r("div",{staticClass:"gallery__info-title"},[r("h4",[e._v(e._s(t.user.name))]),r("p",[e._v("@"+e._s(t.user.username))])]),t.description?r("div",{staticClass:"gallery__info-image"},[r("h3",{staticClass:"gallery__info-image__title"},[e._v(e._s(e.currentDescription))]),r("p",[e._v(e._s(t.created_at))])]):e._e()]):e._e()],1)})),0),e.isModalOpen?r("Modal",{attrs:{image:e.currentImage,isModalOpen:e.isModalOpen},on:{modalfalse:function(t){e.isModalOpen=!1}}}):e._e()],1)},p=[],_=(r("a4d3"),r("e01a"),r("a15b"),r("a434"),r("ac1f"),r("1276"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"modal__wrapper",on:{click:function(t){return e.$emit("modalfalse",!1)}}},[r("el-card",{staticClass:"modal",nativeOn:{click:function(e){e.stopPropagation()}}},[r("div",{staticClass:"modal__content"},[r("div",[r("el-image",{staticClass:"modal__image",attrs:{alt:e.image.alt_description,src:e.image.urls.small,fit:"cover"}}),r("p",{staticClass:"modal__date"},[e._v(e._s(e.image.created_at))])],1),r("div",{staticClass:"modal__right"},[r("h2",{staticClass:"modal__value"},[e._v(e._s(e.image.user.name))]),r("p",{staticClass:"modal__value"},[e._v("@"+e._s(e.image.user.username))]),e.image.description?r("p",{staticClass:"modal__value"},[e._v(e._s(e.image.description))]):r("p",{staticClass:"modal__value"},[e._v("Описание отсутствует")]),r("el-button",{staticClass:"modal__btn",attrs:{type:"success"},on:{click:function(t){return e.imageSave(e.image)}}},[e._v("Скачать изображение")])],1),r("div",{on:{click:function(t){return e.$emit("modalfalse",!1)}}},[r("i",{staticClass:"modal__icon el-icon-close"})])])])],1)}),g=[],v={props:{isModalOpen:{type:Boolean,default:!1},image:Object},methods:{imageSave:function(e){window.open(e.links.download)}}},b=v,C=(r("5488"),r("2877")),y=Object(C["a"])(b,_,g,!1,null,"41f20964",null),k=y.exports,O=(r("4480"),{components:{Modal:k},data:function(){return{isViewImage:!1,isModalOpen:!1,currentImage:"",currentDescription:""}},props:{images:Array},methods:{imageCheck:function(e){this.isViewImage=e.id,this.currentImage=e,this.currentDescription=e.description,null!=e.description&&e.description.length>100&&(this.currentDescription=e.description.split("").splice(0,100).join("")+"...")}}}),w=O,$=Object(C["a"])(w,h,p,!1,null,"79f770fa",null),x=$.exports,E={name:"Home",components:{Images:x},data:function(){return{img:"",images:[]}},created:function(){var e=this;m.photos.getRandomPhoto({count:27}).then(c["toJson"]).then((function(t){return e.images=t})).catch((function(t){return e.$store.commit("setError",t)}))},methods:{}},S=E,U=Object(C["a"])(S,o,a,!1,null,null,null),j=U.exports,I=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e.$store.getters.isError.length>0?s("div",[s("Error")],1):s("div",{staticClass:"auth"},[s("h1",{on:{click:e.login}},[e._v("Авторизоваться с помощью Unsplash")]),s("img",{staticClass:"auth__logo",attrs:{src:r("9b19"),alt:""},on:{click:e.login}}),e.isAuth?s("div",{staticClass:"auth-form"},[s("el-input",{attrs:{placeholder:"Вставьте код авторизации"},model:{value:e.codeAuth,callback:function(t){e.codeAuth=t},expression:"codeAuth"}}),s("el-button",{staticClass:"auth-form-btn",attrs:{type:"success"},on:{click:e.loginEnd}},[e._v("Готово")])],1):e._e()])])},A=[],P={name:"Auth",data:function(){return{unsplash:"",codeAuth:"",isAuth:!1}},methods:{login:function(){var e=m.auth.getAuthenticationUrl(["public","read_user","read_photos","read_collections"]);this.isAuth=!0,window.open(e,"_blank")},loginEnd:function(){var e=this;m.auth.userAuthentication(this.codeAuth).then(c["toJson"]).then((function(t){t.error?e.$message.error("Вы ввели неккоректный ключ"):(m.auth.setBearerToken(t.access_token),localStorage.setItem("Bearer",JSON.stringify(t)),m.currentUser.profile().then(c["toJson"]).then((function(t){localStorage.setItem("User",JSON.stringify(t)),e.$router.push("/users/"+t.username)})).catch((function(e){return console.log(e)})))})).catch((function(e){return console.log(e)}))}}},J=P,M=(r("878d"),Object(C["a"])(J,I,A,!1,null,"a63c324c",null)),B=M.exports,N=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"profile__wrapper"},[r("el-card",{staticClass:"profile"},[r("div",{staticClass:"profile__title",attrs:{slot:"header"},slot:"header"},[r("h2",{staticClass:"profile-title"},[e._v(e._s(e.user.name))]),e.isUser?r("h3",{staticClass:"profile-name"},[e._v("Мой профиль")]):e._e()]),r("div",{staticClass:"text item"},[r("picture",[r("source",{attrs:{srcset:e.user.profile_image.medium,media:"(max-width: 768px)"}}),r("source",{attrs:{srcset:e.user.profile_image.small,media:"(max-width: 520px)"}}),r("img",{attrs:{src:e.user.profile_image.large,alt:""}})])])])],1),e.$store.getters.isError.length>0?r("div",[r("Error")],1):e._e()])},F=[],T={name:"User",data:function(){return{user:"",isUser:!1}},created:function(){var e=this;m.currentUser.profile().then(c["toJson"]).then((function(t){localStorage.setItem("User",JSON.stringify(t)),e.$route.params.id==t.username?(e.isUser=!0,e.user=t):m.users.profile(e.$route.params.id).then(c["toJson"]).then((function(t){void 0!=t.errors&&"Couldn't find User"==t.errors[0]?(e.$message.error("Данного пользователя не существует. Вы будете перенаправлены на главную страницу."),setTimeout((function(){return e.$router.push("/")}),2e3)):(e.user=t,e.isUser=!1)})).catch((function(t){return e.$store.commit("setError",t)}))})).catch((function(t){return e.$store.commit("setError",t)}))}},H=T,V=(r("c3ae"),Object(C["a"])(H,N,F,!1,null,"71684d92",null)),q=V.exports,D=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e.collections.length>0?r("div",{staticClass:"collections"},e._l(e.collections,(function(t){return r("div",{key:t.id},[r("el-card",{staticClass:"collections__card",nativeOn:{click:function(r){return e.getPhotos(t.id)}}},[r("div",{staticClass:"collections__left"},[r("el-image",{staticClass:"collections-img",attrs:{src:t.cover_photo.urls.small,fit:"cover"}}),r("div",{staticClass:"collections__title"},[r("h1",[e._v(e._s(t.title))]),r("p",[e._v(e._s(t.cover_photo.description))])]),r("div",{staticClass:"collections__author"},[r("h3",[e._v(e._s(t.user.name))]),r("p",[e._v("@"+e._s(t.user.username))])])],1)])],1)})),0):e._e(),e.$store.getters.isError.length>0?r("div",[r("Error")],1):e._e()])},K=[],L=(r("841c"),r("5661"),{name:"Collections",data:function(){return{collectionFind:"",collections:[]}},created:function(){this.getCollections()},updated:function(){this.getCollections()},methods:{getCollections:function(){var e=this;this.collectionFind=this.$route.query.img,m.search.collections(this.collectionFind).then(c["toJson"]).then((function(t){e.collections=t.results})).catch((function(t){return e.$store.commit("setError",t)}))},getPhotos:function(e){this.$router.push("/collection/"+e+"?word="+this.$route.query.img)}}}),R=L,Y=Object(C["a"])(R,D,K,!1,null,"c2437fa8",null),z=Y.exports,G=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e.$store.getters.isError.length>0?r("div",[r("Error")],1):r("div",[r("el-breadcrumb",{staticClass:"nav",attrs:{separator:"/"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("Главная страница")]),r("el-breadcrumb-item",[r("el-link",{attrs:{href:"/album?img="+e.keyword}},[e._v("Назад")])],1),r("el-breadcrumb-item",[r("p",[e._v("Страница альбома")])])],1),r("Images",{attrs:{images:e.images}})],1)])},Q=[],W={name:"Photos",components:{Images:x},data:function(){return{images:[],keyword:""}},created:function(){var e=this,t=this.$route.params.id;this.keyword=this.$route.query.word,m.search.photos(this.keyword,{collections:t}).then(c["toJson"]).then((function(t){return e.images=t.results})).catch((function(t){return e.$store.commit("setError",t)}))}},X=W,Z=(r("93c9"),Object(C["a"])(X,G,Q,!1,null,"1673d7f2",null)),ee=Z.exports;s["default"].use(i["a"]);var te=[{path:"/",name:"Home",component:j},{path:"/auth",name:"Auth",component:B},{path:"/users/:id",name:"User",component:q},{path:"/album",name:"Collections",component:z},{path:"/collection/:id",component:ee}],re=new i["a"]({mode:"history",base:"/",routes:te});re.beforeEach((function(e,t,r){"Auth"==e.name&&localStorage.getItem("Bearer")?r({name:"Home"}):r()}));var se=re,ne=r("2f62");s["default"].use(ne["a"]);var ie=new ne["a"].Store({state:{isError:[]},mutations:{setError:function(e,t){console.log(t),e.isError.push(t)}},actions:{},getters:{isError:function(e){return e.isError}},modules:{}}),oe=r("5c96"),ae=r.n(oe),ce=(r("0fae"),r("dccd")),le=r.n(ce),ue=r("4897"),de=r.n(ue),fe=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("Header"),r("router-view")],1)},me=[],he=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-header",{staticClass:"header"},[r("div",{staticClass:"header__content"},[r("div",{staticClass:"header__left"},[r("el-link",{staticClass:"header-title",attrs:{href:"/"}},[r("h1",[e._v("MyOceanPhotos")])]),r("el-input",{staticClass:"header-input",attrs:{placeholder:"Введите название изображения..."},model:{value:e.textSearch,callback:function(t){e.textSearch=t},expression:"textSearch"}}),r("i",{staticClass:"header-icon el-icon-position",on:{click:e.findImage}})],1),r("div",{staticClass:"header__right"},[e.isUser?e._e():r("router-link",{staticClass:"header-link",attrs:{type:"info",to:"/auth"}},[e._v("Авторизация")]),e.isUser?r("el-link",{attrs:{type:"info",href:"/users/"+e.user.username}},[r("i",{staticClass:"header-icon-profile el-icon-user-solid"})]):e._e(),e.isUser?r("h3",{on:{click:e.logout}},[e._v("Выйти из аккаунта")]):e._e()],1),r("i",{staticClass:"el-icon-menu header__menu-icon",on:{click:e.menuOpen}}),r("div",{ref:"menu",staticClass:"menu"},[r("ul",{staticClass:"menu__list"},[r("li",{staticClass:"menu-item menu-input"},[r("el-input",{attrs:{placeholder:"Введите название изображения..."},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.textSearch(t)},change:e.findImage},model:{value:e.textSearch,callback:function(t){e.textSearch=t},expression:"textSearch"}}),r("el-button",{staticClass:"menu-button",attrs:{type:"success"},on:{click:e.findImage}},[e._v("Найти")])],1),r("li",{staticClass:"menu-item"},[e.isUser?e._e():r("router-link",{staticClass:"header-link",attrs:{type:"info",to:"/auth"}},[e._v(" Авторизация ")]),r("div",{staticClass:"menu-item-profile"},[e.isUser?r("el-link",{attrs:{type:"info",href:"/users/"+e.user.username}},[r("i",{staticClass:"el-icon-user-solid menu-profile-icon"})]):e._e(),e.isUser?r("h3",{on:{click:e.logout}},[e._v("Выйти из аккаунта")]):e._e()],1)],1)])])])])],1)},pe=[],_e=(r("2d5f"),{data:function(){return{isUser:!1,user:"",isOpen:!1,textSearch:""}},created:function(){this.checkUser()},updated:function(){this.checkUser()},methods:{menuOpen:function(){this.isOpen=!this.isOpen,this.isOpen&&this.$refs.menu.classList.add("menu-active"),!this.isOpen&&this.$refs.menu.classList.contains("menu-active")&&this.$refs.menu.classList.remove("menu-active")},logout:function(){var e=this;localStorage.removeItem("Bearer"),localStorage.removeItem("User"),this.$message.error("Вы успешно вышли из аккаунта"),"/"!=this.$route.fullPath?setTimeout((function(){return e.$router.push("/")}),2e3):window.location.reload()},findImage:function(){if(this.textSearch.length>2){var e=this.textSearch;this.textSearch="",this.$router.push("/album?img="+e)}},checkUser:function(){localStorage.getItem("User")?(this.isUser=!0,this.user=JSON.parse(localStorage.getItem("User"))):this.isUser=!1}}}),ge=_e,ve=Object(C["a"])(ge,he,pe,!1,null,"7c539d0f",null),be=ve.exports,Ce={components:{Header:be}},ye=Ce,ke=(r("5c0b"),Object(C["a"])(ye,fe,me,!1,null,null,null)),Oe=ke.exports,we=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"error"},[s("div",{staticClass:"error__title"},[s("h1",[e._v("УПС..Что то пошло не так :000")]),s("p",[e._v("Скорее всего произошла ошибка на стороне сервера")]),s("p",{staticClass:"error-list",on:{click:function(t){e.isOpen=!e.isOpen}}},[e._v("Подробнее...")]),e.isOpen?s("div",e._l(this.$store.getters.isError,(function(t,r){return s("div",{key:r},[s("p",[e._v(e._s(t))])])})),0):e._e()]),s("img",{attrs:{src:r("f6de"),alt:"image"}})])},$e=[],xe={name:"Error",data:function(){return{isOpen:!1}}},Ee=xe,Se=(r("8f9a"),Object(C["a"])(Ee,we,$e,!1,null,"6559a0e1",null)),Ue=Se.exports;s["default"].config.productionTip=!1,de.a.use(le.a),s["default"].use(ae.a),s["default"].component("Error",Ue),new s["default"]({router:se,store:ie,render:function(e){return e(Oe)}}).$mount("#app")},"5c0b":function(e,t,r){"use strict";var s=r("9c0c"),n=r.n(s);n.a},"878d":function(e,t,r){"use strict";var s=r("e8d4"),n=r.n(s);n.a},"8f9a":function(e,t,r){"use strict";var s=r("5259"),n=r.n(s);n.a},"93c9":function(e,t,r){"use strict";var s=r("0475"),n=r.n(s);n.a},"9b19":function(e,t,r){e.exports=r.p+"img/logo.ba07b64d.svg"},"9c0c":function(e,t,r){},c3ae:function(e,t,r){"use strict";var s=r("536b"),n=r.n(s);n.a},e8d4:function(e,t,r){},f6de:function(e,t,r){e.exports=r.p+"img/error.1212787b.jpg"},f8d9:function(e,t,r){}});
//# sourceMappingURL=app.c1b1a5c0.js.map